import{a as P}from"./chunk-FWUUPOZR.js";import{h as S,j as R}from"./chunk-L377CBTI.js";import{Ab as O,Bb as y,Db as W,Eb as b,Fb as z,Kb as m,Lb as M,Nb as E,Oa as x,Pa as p,Pb as H,Ua as v,Za as _,bb as C,da as l,ea as h,kc as I,nb as r,ob as c,pb as d,qa as g,qb as T,ta as w,wb as k,yb as f,zb as s}from"./chunk-LA2UXVWI.js";var V=["wrapperRef"],X=["*"];function Y(o,u){if(o&1){let e=k();c(0,"span",4,0),f("mouseenter",function(t){l(e);let n=s();return h(n.onMouseEnter(t))})("mousemove",function(t){l(e);let n=s();return h(n.onMouseMove(t))})("mouseleave",function(){l(e);let t=s();return h(t.onMouseLeave())}),y(2),d()}}function D(o,u){if(o&1&&T(0,"orcid-skeleton-placeholder",5),o&2){let e=s();r("shape",e.skeletonShape)("width",e.skeletonWidth)("height",e.textHeightSkeleton)}}function j(o,u){if(o&1&&(c(0,"div",6),E(1),d()),o&2){let e=s();m("left",e.tooltipX,"px")("top",e.tooltipY,"px"),p(),H(" ",e.tooltipText," ")}}var Z=(()=>{class o{constructor(e){this.cdr=e,this.text="",this.loading=!1,this.skeletonShape="square",this.skeletonWidth="100%",this.textHeightSkeleton="auto",this.height="auto",this.center=!1,this.overflows=!1,this.showCustomTooltip=!1,this.tooltipX=0,this.tooltipY=0}ngAfterViewInit(){requestAnimationFrame(()=>{this.checkOverflow(),this.setupResizeObserver(),this.cdr.detectChanges()})}ngOnChanges(e){e.text||e.loading?setTimeout(()=>{this.checkOverflow(),this.setupResizeObserver()},0):setTimeout(()=>{this.checkOverflow()},0)}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()}onResize(){this.checkOverflow()}setupResizeObserver(){if(typeof ResizeObserver>"u")return;this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(()=>{this.checkOverflow()});let e=this.wrapperElement?.nativeElement;if(e){this.resizeObserver.observe(e);let i=e.firstElementChild;i&&this.resizeObserver.observe(i)}}checkOverflow(){let e=this.wrapperElement?.nativeElement;if(!e){this.overflows=!1;return}let i=e.firstElementChild;if(i){let t=this.overflows;this.overflows=i.scrollWidth>i.clientWidth,t!==this.overflows&&this.cdr.detectChanges()}else{let t=this.overflows;this.overflows=e.scrollWidth>e.clientWidth,t!==this.overflows&&this.cdr.detectChanges()}}get tooltipText(){return this.text?this.text:this.wrapperElement?.nativeElement?.textContent?.trim()||""}get shouldShowTooltip(){return!this.loading&&this.overflows&&!!this.tooltipText}get hostWidth(){return this.loading?"100%":"auto"}get hostMinHeight(){return this.height!=="auto"?this.height:"0"}get hostDisplay(){return this.loading?this.center?"flex":"inline-block":this.tooltipText?this.center?"flex":"inline-block":"none"}get hostJustifyContent(){return this.center?"center":"normal"}get hostAlignItems(){return this.center||this.loading?"center":"normal"}get hasTextClass(){return!!this.tooltipText||this.loading}onMouseEnter(e){this.shouldShowTooltip&&(this.updateTooltipPosition(e),this.showCustomTooltip=!0,this.cdr.detectChanges())}onMouseMove(e){this.showCustomTooltip&&(this.updateTooltipPosition(e),this.cdr.detectChanges())}onMouseLeave(){this.showCustomTooltip=!1,this.cdr.detectChanges()}updateTooltipPosition(e){this.tooltipX=e.clientX+10,this.tooltipY=e.clientY+10;let i=300,t=100,n=window.innerWidth,a=window.innerHeight;this.tooltipX+i>n&&(this.tooltipX=e.clientX-i-10),this.tooltipY+t>a&&(this.tooltipY=e.clientY-t-10),this.tooltipX<10&&(this.tooltipX=10),this.tooltipY<10&&(this.tooltipY=10)}static{this.\u0275fac=function(i){return new(i||o)(v(I))}}static{this.\u0275cmp=_({type:o,selectors:[["orcid-text-with-tooltip"]],viewQuery:function(i,t){if(i&1&&W(V,5,w),i&2){let n;b(n=z())&&(t.wrapperElement=n.first)}},hostVars:12,hostBindings:function(i,t){i&1&&f("resize",function(a){return t.onResize(a)},x),i&2&&(m("width",t.hostWidth)("min-height",t.hostMinHeight)("display",t.hostDisplay)("justify-content",t.hostJustifyContent)("align-items",t.hostAlignItems),M("has-text",t.hasTextClass))},inputs:{text:"text",loading:"loading",skeletonShape:"skeletonShape",skeletonWidth:"skeletonWidth",textHeightSkeleton:"textHeightSkeleton",height:"height",center:"center"},features:[g],ngContentSelectors:X,decls:3,vars:3,consts:[["wrapperRef",""],["class","text-wrapper",3,"mouseenter","mousemove","mouseleave",4,"ngIf"],[3,"shape","width","height",4,"ngIf"],["class","custom-tooltip",3,"left","top",4,"ngIf"],[1,"text-wrapper",3,"mouseenter","mousemove","mouseleave"],[3,"shape","width","height"],[1,"custom-tooltip"]],template:function(i,t){i&1&&(O(),C(0,Y,3,0,"span",1)(1,D,1,3,"orcid-skeleton-placeholder",2)(2,j,2,5,"div",3)),i&2&&(r("ngIf",!t.loading),p(),r("ngIf",t.loading),p(),r("ngIf",t.showCustomTooltip))},dependencies:[R,S,P],styles:["[_nghost-%COMP%]{display:inline-block;max-width:100%;min-width:0;vertical-align:middle;line-height:normal}.text-wrapper[_ngcontent-%COMP%]{display:inline-block;max-width:100%;min-width:0;line-height:normal}.text-wrapper[_ngcontent-%COMP%]    >*{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.custom-tooltip[_ngcontent-%COMP%]{position:fixed;z-index:10000;background-color:#000000de;color:#fff;padding:8px 12px;border-radius:4px;font-size:12px;max-width:300px;word-wrap:break-word;white-space:normal;pointer-events:none;box-shadow:0 2px 8px #00000026;transform:translate(10px,10px);line-height:normal}"]})}}return o})();export{Z as a};
