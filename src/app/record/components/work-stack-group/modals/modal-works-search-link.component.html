<app-modal [loading]="loadingWorks" [noSidebar]="true">
  <app-modal-header>
    <ng-container i18n="@@record.linkWorks">
      Link works
    </ng-container>
  </app-modal-header>
  <app-modal-side-bar>
    <ng-container id="side-bar-title" i18n="@@record.linkWorks">
      Link works
    </ng-container>
  </app-modal-side-bar>
  <app-modal-footer>
    <button
      mat-raised-button
      color="primary"
      (click)="saveEvent()"
      i18n="@@shared.saveChanges"
      id="save-button"
    >
      Save changes
    </button>
    <button
      mat-stroked-button
      color="primary"
      (click)="closeEvent()"
      i18n="@@shared.cancel"
      id="cancel-button"
    >
      Cancel
    </button>
  </app-modal-footer>
  <div class="row">
    <div class="col orc-font-small-print">
      <p i18n="@@shared.searchAndLink">
        Search and Link wizards are our recommended way to populate your record.
        They make adding works, funding and peer reviews simple and save you
        time over updating your record manually. Select a platform from the list
        below to start linking items to your record.
      </p>
      <a
        class="underline"
        href="https://support.orcid.org/hc/en-us/articles/360006973653-Add-works-by-direct-import-from-other-systems"
        i18n="@@record.linkWorksMoreInfo"
      >
        More information about linking works to your ORCID record
      </a>
    </div>
  </div>
  <div class="row">
    <h3 i18n="@@shared.availableSearch">Available Search & Link wizards</h3>
    <mat-divider class="row orcid-divider"></mat-divider>
  </div>
  <div class="row search-link-options">
    <div class="select">
      <div class="title">
        <label class="mat-caption">
          <strong i18n="@@record.workType">Work type</strong>
        </label>
      </div>
      <mat-form-field
        appearance="outline"
        class="mat-form-field-min"
      >
        <mat-select
          [(value)]="workTypeSelected"
          (selectionChange)="searchAndLink()"
        >
          <mat-option value="All">All</mat-option>
          <mat-option
            *ngFor="let workType of workTypes"
            [value]="workType"
          >
            {{ workType }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="select">
      <div class="title">
        <label class="mat-caption">
          <strong i18n="@@record.geographicalArea">Geographical area</strong>
        </label>
      </div>
      <mat-form-field
        id="geographical-area-input"
        appearance="outline"
        class="mat-form-field-min"
      >
        <mat-select
          [(value)]="geographicalAreaSelected"
          (selectionChange)="searchAndLink()"
        >
          <mat-option value="All">All</mat-option>
          <mat-option
            *ngFor="let geographicalArea of geographicalAreas"
            [value]="geographicalArea"
          >
            {{ geographicalArea }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div *ngFor="let recordImportWizard of recordImportWizards">
    <h2 class="orc-font-body-small">
      <a [href]="openImportWizardUrlFilter(recordImportWizard)">
        {{ recordImportWizard.name }}
      </a>
    </h2>
    <p class="orc-font-small-print">
      <ng-container *ngIf="recordImportWizard.description.length > 140">
        <ng-container *ngIf="recordImportWizard.show">
          {{ recordImportWizard.description.substring(0, 140) + '...' }}
          <a
            class="underline"
            i18n="@@shared.showMore"
            (click)="toggle(recordImportWizard)"
          >

            Show more
          </a>
        </ng-container>
        <ng-container *ngIf="!recordImportWizard.show">
          {{ recordImportWizard.description }}
          <a
            class="underline"
            i18n="@@shared.showLess"
            (click)="toggle(recordImportWizard)"
          >

            Show less
          </a>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="recordImportWizard.description.length < 140">
        {{ recordImportWizard.description }}
      </ng-container>
    </p>
  </div>
</app-modal>

