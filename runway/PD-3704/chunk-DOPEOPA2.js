import{h as P,j as V}from"./chunk-L377CBTI.js";import{Ab as O,Bb as b,Db as y,Eb as z,Fb as W,Kb as d,Lb as E,Nb as M,Oa as w,Pa as h,Pb as R,Ua as v,Za as x,bb as T,da as r,ea as l,kc as k,nb as g,ob as a,pb as c,qa as m,ta as u,wb as C,yb as f,zb as _}from"./chunk-LA2UXVWI.js";var X=["wrapperRef"],Y=["*"];function H(s,I){if(s&1&&(a(0,"div",3),M(1),c()),s&2){let e=_();d("left",e.tooltipX,"px")("top",e.tooltipY,"px"),h(),R(" ",e.tooltipText," ")}}var G=(()=>{class s{constructor(e){this.cdr=e,this.text="",this.overflows=!1,this.showCustomTooltip=!1,this.tooltipX=0,this.tooltipY=0}ngAfterViewInit(){requestAnimationFrame(()=>{this.checkOverflow(),this.setupResizeObserver(),this.cdr.detectChanges()})}ngOnChanges(e){e.text?setTimeout(()=>{this.checkOverflow(),this.setupResizeObserver()},0):setTimeout(()=>{this.checkOverflow()},0)}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()}onResize(){this.checkOverflow()}setupResizeObserver(){if(typeof ResizeObserver>"u")return;this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(()=>{this.checkOverflow()});let e=this.wrapperElement?.nativeElement;if(e){this.resizeObserver.observe(e);let t=e.firstElementChild;t&&this.resizeObserver.observe(t)}}checkOverflow(){let e=this.wrapperElement?.nativeElement;if(!e){this.overflows=!1;return}let t=e.firstElementChild;if(t){let i=this.overflows;this.overflows=t.scrollWidth>t.clientWidth,i!==this.overflows&&this.cdr.detectChanges()}else{let i=this.overflows;this.overflows=e.scrollWidth>e.clientWidth,i!==this.overflows&&this.cdr.detectChanges()}}get tooltipText(){return this.text?this.text:this.wrapperElement?.nativeElement?.textContent?.trim()||""}get shouldShowTooltip(){return this.overflows&&!!this.tooltipText}get hostDisplay(){return this.tooltipText?"inline-block":"none"}get hasTextClass(){return!!this.tooltipText}onMouseEnter(e){this.shouldShowTooltip&&(this.updateTooltipPosition(e),this.showCustomTooltip=!0,this.cdr.detectChanges())}onMouseMove(e){this.showCustomTooltip&&(this.updateTooltipPosition(e),this.cdr.detectChanges())}onMouseLeave(){this.showCustomTooltip=!1,this.cdr.detectChanges()}updateTooltipPosition(e){this.tooltipX=e.clientX+10,this.tooltipY=e.clientY+10;let t=300,i=100,o=window.innerWidth,n=window.innerHeight;this.tooltipX+t>o&&(this.tooltipX=e.clientX-t-10),this.tooltipY+i>n&&(this.tooltipY=e.clientY-i-10),this.tooltipX<10&&(this.tooltipX=10),this.tooltipY<10&&(this.tooltipY=10)}static{this.\u0275fac=function(t){return new(t||s)(v(k))}}static{this.\u0275cmp=x({type:s,selectors:[["orcid-text-with-tooltip"]],viewQuery:function(t,i){if(t&1&&y(X,5,u),t&2){let o;z(o=W())&&(i.wrapperElement=o.first)}},hostVars:4,hostBindings:function(t,i){t&1&&f("resize",function(n){return i.onResize(n)},w),t&2&&(d("display",i.hostDisplay),E("has-text",i.hasTextClass))},inputs:{text:"text"},features:[m],ngContentSelectors:Y,decls:4,vars:1,consts:[["wrapperRef",""],[1,"text-wrapper",3,"mouseenter","mousemove","mouseleave"],["class","custom-tooltip",3,"left","top",4,"ngIf"],[1,"custom-tooltip"]],template:function(t,i){if(t&1){let o=C();O(),a(0,"span",1,0),f("mouseenter",function(p){return r(o),l(i.onMouseEnter(p))})("mousemove",function(p){return r(o),l(i.onMouseMove(p))})("mouseleave",function(){return r(o),l(i.onMouseLeave())}),b(2),c(),T(3,H,2,5,"div",2)}t&2&&(h(3),g("ngIf",i.showCustomTooltip))},dependencies:[V,P],styles:["[_nghost-%COMP%]{display:inline-block;max-width:100%;min-width:0}.text-wrapper[_ngcontent-%COMP%]{display:inline-block;max-width:100%;min-width:0}.text-wrapper[_ngcontent-%COMP%]    >*{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.custom-tooltip[_ngcontent-%COMP%]{position:fixed;z-index:10000;background-color:#000000de;color:#fff;padding:8px 12px;border-radius:4px;font-size:12px;max-width:300px;word-wrap:break-word;white-space:normal;pointer-events:none;box-shadow:0 2px 8px #00000026;transform:translate(10px,10px);line-height:normal}"]})}}return s})();export{G as a};
